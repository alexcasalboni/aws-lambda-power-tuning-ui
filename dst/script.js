"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){return Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)?Array.from(e):void 0}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);e.length>t;t++)r[t]=e[t];return r}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;t.length>r;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _typeof(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function encode(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Float32Array;return e=new t(e),e instanceof Uint8Array||(e=new Uint8Array(e.buffer)),base64js.fromByteArray(e)}function decode(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Float32Array;return Array.from(new t(base64js.toByteArray(e).buffer))}function custom_tooltip(e){var t=document.getElementById("tooltip");if(0===e.opacity)return t.style.display="none",void 0;var r=e.dataPoints[0].label,n=smart_round(parseFloat(e.dataPoints[0].value)),o=smart_round(parseFloat(e.dataPoints[1].value),2);t.children[0].innerHTML="Size: ".concat(r),t.children[1].innerHTML="Time: ".concat(n,"ms"),t.children[2].innerHTML="Cost: ".concat(o,"$");var a=this._chart.canvas.getBoundingClientRect();t.style.display="block",t.style.left=a.left+window.pageXOffset+e.caretX+"px",t.style.top=a.top+window.pageYOffset+e.caretY+"px",t.style.fontFamily=e._bodyFontFamily,t.style.fontSize=e.bodyFontSize+"px",t.style.fontStyle=e._bodyFontStyle,t.style.pointerEvents="none"}function smart_round(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1e-12>e)return e.toFixed(t).replace(/(\.0*[1-9]+)[0]+$|\.[0]+$/,"$1");var r=Math.max(-Math.round(Math.log10(e))+t,0),n=e.toFixed(r);return n.replace(/(\.0*[1-9]+)[0]+$|\.[0]+$/,"$1")}(function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.base64js=e()}})(function(){return function(){function e(t,r,n){function o(i,l){if(!r[i]){if(!t[i]){var c="function"==typeof require&&require;if(!l&&c)return c(i,!0);if(a)return a(i,!0);var s=Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var u=r[i]={exports:{}};t[i][0].call(u.exports,function(e){var r=t[i][1][e];return o(r||e)},u,u.exports,e,t,r,n)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;n.length>i;i++)o(n[i]);return o}return e}()({"/":[function(e,t,r){function n(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function o(e){var t=n(e),r=t[0],o=t[1];return 3*(r+o)/4-o}function a(e,t,r){return 3*(t+r)/4-r}function i(e){var t,r,o=n(e),i=o[0],l=o[1],c=new f(a(e,i,l)),s=0,u=l>0?i-4:i;for(r=0;u>r;r+=4)t=d[e.charCodeAt(r)]<<18|d[e.charCodeAt(r+1)]<<12|d[e.charCodeAt(r+2)]<<6|d[e.charCodeAt(r+3)],c[s++]=255&t>>16,c[s++]=255&t>>8,c[s++]=255&t;return 2===l&&(t=d[e.charCodeAt(r)]<<2|d[e.charCodeAt(r+1)]>>4,c[s++]=255&t),1===l&&(t=d[e.charCodeAt(r)]<<10|d[e.charCodeAt(r+1)]<<4|d[e.charCodeAt(r+2)]>>2,c[s++]=255&t>>8,c[s++]=255&t),c}function l(e){return u[63&e>>18]+u[63&e>>12]+u[63&e>>6]+u[63&e]}function c(e,t,r){for(var n,o=[],a=t;r>a;a+=3)n=(16711680&e[a]<<16)+(65280&e[a+1]<<8)+(255&e[a+2]),o.push(l(n));return o.join("")}function s(e){for(var t,r=e.length,n=r%3,o=[],a=16383,i=0,l=r-n;l>i;i+=a)o.push(c(e,i,i+a>l?l:i+a));return 1===n?(t=e[r-1],o.push(u[t>>2]+u[63&t<<4]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],o.push(u[t>>10]+u[63&t>>4]+u[63&t<<2]+"=")),o.join("")}r.byteLength=o,r.toByteArray=i,r.fromByteArray=s;for(var u=[],d=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=0,p=y.length;p>m;++m)u[m]=y[m],d[y.charCodeAt(m)]=m;d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},{}]},{},[])("/")});var App=function(){function e(){_classCallCheck(this,e),this.canvas=document.querySelector("canvas"),this.report_el=document.getElementById("report"),this.error_el=document.getElementById("error")}return _createClass(e,[{key:"error",value:function(e){this.report_el.style.display="none",this.error_el.style.display="flex";var t="https://github.com/matteo-ronchetti/aws-lambda-power-tuning-ui";switch(e){case"empty":var r=window.location.protocol+"//"+window.location.host+"#"+encode([128,256,512,1024],Int16Array)+";"+encode([36555.39,18441.58,8539.34,3870.76])+";"+encode([7612e-8,7696e-8,7155e-8,6489e-8]);document.getElementById("error-title").innerHTML="Error: URL must contain data in the hash!",document.getElementById("error-msg").innerHTML="Your URL is ".concat(window.location,' and should be something like <a href="').concat(r,'" class="dont-break-out">').concat(r,'</a><br>Please refer to the <a href="').concat(t,'">documentation</a>.');break;case"malformed":document.getElementById("error-title").innerHTML="Error: malformed URL parameters!",document.getElementById("error-msg").innerHTML="Please check your URL parameters, refer to the <a href='${doc_url}#url-query-string-format'>documentation</a>.";break;default:document.getElementById("error-title").innerHTML="Error",document.getElementById("error-msg").innerHTML="Please check your URL parameters"}}},{key:"show",value:function(e){try{var t=e.split(";"),r=decode(t[0],Int16Array),n=decode(t[1]),o=decode(t[2]);console.log(""+r,""+n,""+o)}catch(a){return console.error(a),this.error("malformed"),void 0}this.report_el.style.display="flex",this.error_el.style.display="none";var i=.5,l=Math.max.apply(Math,_toConsumableArray(o)),c=Math.max.apply(Math,_toConsumableArray(n)),s=r.map(function(e,t){return{size:e,time:n[t],cost:o[t],value:i*o[t]/l+(1-i)*n[t]/c}});s.sort(function(e,t){return e.time-t.time}),document.getElementById("min-time").innerHTML="".concat(s[0].size,"MB"),document.getElementById("max-time").innerHTML="".concat(s[s.length-1].size,"MB"),s.sort(function(e,t){return e.cost-t.cost}),document.getElementById("min-cost").innerHTML="".concat(s[0].size,"MB"),document.getElementById("max-cost").innerHTML="".concat(s[s.length-1].size,"MB"),s.sort(function(e,t){return e.value-t.value}),document.getElementById("balanced").innerHTML="".concat(s[0].size,"MB"),window.chartColors={red:"rgb(255, 99, 132)",blue:"rgb(54, 162, 235)"};var u={labels:r,datasets:[{label:"Execution time (ms)",borderColor:window.chartColors.red,backgroundColor:window.chartColors.red,fill:!1,data:n,yAxisID:"time-axis"},{label:"Execution Cost (USD)",borderColor:window.chartColors.blue,backgroundColor:window.chartColors.blue,fill:!1,data:o,yAxisID:"cost-axis"}]},d=this.canvas.getContext("2d");window.myLine=Chart.Line(d,{data:u,options:{responsive:!0,hoverMode:"index",tooltips:{mode:"index",intersect:!1,enabled:!1,custom:custom_tooltip},stacked:!1,title:{display:!1},scales:{xAxes:[{scaleLabel:{display:!0,labelString:"Lambda power (MB)"}}],yAxes:[{ticks:{beginAtZero:!0,callback:function(e){return"".concat(smart_round(e)," ms")}},type:"linear",display:!0,scaleLabel:{display:!0,labelString:"Execution Time"},position:"left",id:"time-axis"},{ticks:{beginAtZero:!0,callback:function(e){return"".concat(smart_round(e)," $")}},type:"linear",display:!0,position:"right",id:"cost-axis",scaleLabel:{display:!0,labelString:"Execution Cost"},gridLines:{drawOnChartArea:!1}}]}}})}}]),e}();